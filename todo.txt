must merge all dbs together, except for the github log.

move texts db stuff in change.py to texts.py

store raw xml in files db (needed for transactions to work, git is unreliable);
store both texts and other xml files we need (prosody, members). all of this in
a single table, where the key is the filename (file names should be unique).
schemas should be hard copied into my repo after each change.

create table files(
   name text primary key not null,
   repo text not null,
   path text not null,
   mtime integer not null,
   data blob not null
);

Find a way to merge several tooltips when necessary as in A | B ... And use a
data table. Should also attach to each generated piece of text the xml node it
comes from (with lineno), to make it easier to debug stuff. Should also
highlight stuff that has a tooltip on mouseover. or add sth that indicates that
it has a tooltip.

Can add options to the xml display. Need to have a pretty-print func that
preserves space and doesn't add unnecessary space.

---

For Manu and github issues see if errors always happen with editorial stuff and
if so see if building without editorial stuff works.

Regardre pour le tamoul. DSAL+Cologne. First start with just a word index, then
add scans, then other stuff. Need to have a grammar that describes how
transliteration works and that has some stuff on phonetics in case we can

Relancer Humanum.

ID pour les <lg> Amandine ? Must keep a copy of the XML of each <lg> in the db,
with the repo name, the commit num and the file name and the line no, so that
we can point back to an older version if the ref is lost.

must make ids unique across all elements, not just lgs

create table verses(
   name text not null,
   id text not null,
   repo text,
   commit text,
   name text,
   data xml,
   line integer,
   column integer,
   primary key(name, id),
   foreign key(repo, name) references ...
);

Ajouter 2nd champ dans rech. parallèles; pour substring; allow custom threshold
for similarity? or make it automatic if we have no match? in fact should use a
heap and use a thresh > 0. also remove the "illegal input" thing.

<choice><unclear><unclear>..</choice> à garder dans les 2 affichages.
logical ajouter nums. de page.
ajouter avec js pas css

---

For searching and highlighting, maybe the most convenient option for now would
be to have an offset map for each search representation that maps each
character to the corresponding offset in the formatted representation. This can
be compressed with delta encoding and varints. Go for that instead of what is
said above. And search representations should be derived from the formatted
representation, and this should be done in go, with a separate process.
